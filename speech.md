# Речь для выступления о музыкальном приложении

---

## Вступление

Добрый день! Сегодня я хочу рассказать вам о нашем музыкальном приложении, которое помогает пользователям лучше понимать свои музыкальные предпочтения и эмоциональную связь с музыкой.

---

## 1. Страница любимых треков и истории прослушивания

Первая функция, о которой я хочу рассказать — это страница с любимыми треками и историей прослушивания.

**Что может сделать пользователь:**

На этой странице пользователь может увидеть все свои любимые треки — те композиции, которые он отметил как понравившиеся. Каждый трек отображается с обложкой, названием, исполнителем и альбомом. Пользователь может открыть любую композицию прямо на Last.fm, чтобы послушать её или узнать больше информации.

Кроме того, на этой же странице можно переключиться и посмотреть историю прослушивания — все треки, которые пользователь слушал, с указанием точного времени прослушивания. Это позволяет вспомнить, что играло вчера, на прошлой неделе или даже месяц назад.

Пользователь может обновить список треков, синхронизировав данные с Last.fm, чтобы увидеть самые свежие добавления. Если треков много, они разбиты на страницы для удобного просмотра.

---

## 2. Карта вкусов

Вторая функция — это визуальная карта вкусов, которую мы называем "Космической картой".

**Что может сделать пользователь:**

Представьте себе космическую карту, где большие планеты — это ваши любимые музыкальные жанры, а маленькие спутники вокруг них — это артисты, которых вы слушаете в этих жанрах. Чем больше вы слушаете определённый жанр или артиста, тем крупнее он отображается на карте.

Пользователь может взаимодействовать с этой картой: перетаскивать планеты и спутники, чтобы лучше рассмотреть связи между жанрами и исполнителями. При нажатии на любой элемент карты появляется информация о нём — название жанра или артиста, количество треков, и можно перейти на страницу артиста на Last.fm.

Эта визуализация помогает понять структуру своих музыкальных предпочтений — какие жанры доминируют, какие артисты связаны с какими направлениями музыки. Это как карта вашего музыкального мира.

---

## 3. Календарь эмоций

Третья функция — это эмоциональный календарь, который показывает настроение вашей музыки за последний год.

**Что может сделать пользователь:**

Календарь отображает каждый день в виде маленького цветного квадратика. Цвет квадратика показывает эмоциональное настроение музыки, которую вы слушали в этот день. Есть пять основных эмоций: радость, энергия, спокойствие, меланхолия и любовь. Чем ярче квадратик, тем больше треков вы слушали в этот день.

Пользователь может навести курсор на любой день, чтобы увидеть точную дату, количество прослушиваний и преобладающее настроение. Это позволяет увидеть, как менялось ваше эмоциональное состояние через музыку — были ли периоды, когда вы слушали больше энергичной музыки, или наоборот, спокойной.

Справа от календаря отображается статистика — процентное соотношение каждой эмоции за весь период и общее количество прослушанных треков. Пользователь может обновить данные, чтобы увидеть самую актуальную информацию.

Это уникальный способ увидеть свой эмоциональный путь через музыку за целый год.

---

## 4. Чат-ассистент

Четвёртая функция — это умный чат-ассистент, который всегда готов помочь.

**Что может сделать пользователь:**

В правом нижнем углу экрана есть кнопка с иконкой сообщения. При нажатии на неё открывается окно чата с музыкальным ассистентом.

Пользователь может задать ассистенту любой вопрос о своей музыке. Например, можно спросить о своих вкусах: "Какие жанры я слушаю чаще всего?" или "Кто мой любимый артист?". Можно попросить рекомендации: "Посоветуй мне что-нибудь похожее на то, что я слушаю". Можно узнать статистику: "Сколько треков я прослушал за этот месяц?".

Ассистент анализирует всю информацию о музыкальных предпочтениях пользователя и даёт персональные ответы. Он понимает контекст и может вести полноценный диалог о музыке.

Это как личный музыкальный консультант, который всегда под рукой и знает всё о ваших предпочтениях.

---

## Технические аспекты реализации

### Что делает Next.js в нашем проекте

Next.js — это React-фреймворк, который мы использовали для создания нашего приложения. Он предоставляет несколько ключевых возможностей, которые были критически важны для нашего проекта.

**Во-первых**, Next.js позволяет создавать API-маршруты прямо внутри приложения. Это означает, что мы можем делать серверные запросы к внешним API, таким как Last.fm, не раскрывая наши API-ключи клиентской части приложения. Все запросы к Last.fm проходят через наши серверные маршруты Next.js, что обеспечивает безопасность.

**Во-вторых**, Next.js поддерживает Server Components и Client Components. Server Components позволяют выполнять серверную логику и получать данные на сервере, что ускоряет загрузку страниц. Client Components используются там, где нужна интерактивность — например, в наших 3D-визуализациях или чат-ассистенте.

**В-третьих**, Next.js предоставляет удобную систему маршрутизации на основе файловой структуры. Каждая папка в директории `app` автоматически становится маршрутом, что делает организацию кода интуитивно понятной.

**И наконец**, Next.js оптимизирует производительность приложения — автоматически разделяет код на чанки, оптимизирует изображения и обеспечивает быструю навигацию между страницами.

---

### Работа с 3D библиотеками

Для создания интерактивных 3D-визуализаций, таких как наша космическая карта вкусов, мы использовали несколько специализированных библиотек.

**Основная библиотека — Three.js**. Это мощная JavaScript-библиотека для работы с WebGL, которая позволяет создавать и анимировать 3D-объекты в браузере. С её помощью мы создавали планеты, спутники, звёздное небо и другие 3D-элементы.

**React Three Fiber** — это React-обёртка для Three.js, которая позволяет описывать 3D-сцены декларативно, используя знакомый React-синтаксис. Вместо императивного кода на JavaScript мы можем писать компоненты, как `<Sphere>` или `<OrbitControls>`, что делает код более читаемым и поддерживаемым.

**React Three Drei** — это набор готовых компонентов и утилит для React Three Fiber. Мы использовали компоненты вроде `<OrbitControls>` для управления камерой мышью, `<Stars>` для создания звёздного фона, `<Text>` для отображения текста в 3D-пространстве и `<Float>` для плавной анимации объектов.

**Как это работает в нашем проекте**: мы создаём 3D-сцену с помощью компонента `<Canvas>`, внутри которого размещаем планеты (жанры) и спутники (артисты). Каждая планета вращается вокруг своей оси благодаря хуку `useFrame`, который обновляет анимацию каждый кадр. Спутники вращаются вокруг планет по орбитам, создавая динамичную космическую систему. Пользователь может взаимодействовать со сценой — вращать камеру, приближать и отдалять объекты, кликать на них для получения информации.

Это создаёт впечатляющий визуальный опыт, который помогает пользователям интуитивно понимать структуру своих музыкальных предпочтений.

---

### Работа с API стороннего сервиса (Last.fm)

Интеграция с Last.fm API была одной из ключевых технических задач проекта. Last.fm — это крупнейший музыкальный сервис, который отслеживает прослушивания пользователей и предоставляет богатый API для доступа к этим данным.

**Аутентификация**: Last.fm использует OAuth-авторизацию. Пользователь авторизуется через Last.fm, и мы получаем сессионный ключ, который используется для всех последующих запросов к API. Это обеспечивает безопасный доступ к личным данным пользователя.

**Структура запросов**: Мы создали универсальную функцию `callLastfmApi`, которая формирует запросы к Last.fm с правильной подписью запроса (API signature), которая требуется для аутентифицированных методов. Для публичных методов используется отдельная функция `callLastfmPublicApi`.

**Кеширование**: Чтобы не перегружать API Last.fm и ускорить работу приложения, мы реализовали систему кеширования. Разные типы данных кешируются на разное время — например, информация об артистах кешируется на 30 минут, а недавние треки — всего на 1 минуту, чтобы пользователь видел актуальную информацию. Это значительно снижает количество запросов к API и улучшает производительность.

**Обработка ошибок**: Мы реализовали надёжную обработку ошибок — если API возвращает ошибку, мы логируем её и показываем пользователю понятное сообщение. Также мы проверяем формат ответа перед парсингом, чтобы избежать ошибок при неожиданных ответах от сервера.

**Типы данных**: Мы получаем из Last.fm информацию о любимых треках, истории прослушивания, топ-артистах, друзьях пользователя, статистике прослушиваний и многое другое. Все эти данные обрабатываются и отображаются в нашем приложении в удобном для пользователя виде.

Благодаря этой интеграции наше приложение может предоставить пользователям глубокий анализ их музыкальных предпочтений на основе реальных данных о прослушиваниях.

---

## Заключение

Все эти функции работают вместе, создавая целостную картину музыкальных предпочтений пользователя. Любимые треки показывают, что нравится. История прослушивания — что и когда слушалось. Карта вкусов визуализирует структуру предпочтений. Календарь эмоций раскрывает эмоциональную связь с музыкой. А чат-ассистент помогает получить ответы на любые вопросы.

Технически проект построен на Next.js, который обеспечивает производительность и безопасность. 3D-визуализации созданы с помощью Three.js и React Three Fiber, что позволяет создавать интерактивные и впечатляющие визуальные эффекты. Интеграция с Last.fm API даёт доступ к богатым данным о музыкальных предпочтениях пользователей.

Спасибо за внимание! Готов ответить на ваши вопросы.
